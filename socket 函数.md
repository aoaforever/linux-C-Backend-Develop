函数说明
==

```cpp
int socket(int domain, int type, int protocol);
```
### 参数：  
`domain`:选择协议族用以通信。这些协议族定义在了 <sys/socket.h>中。一般传入以下值：
| Name | Purpose | 
| ----|--------|
|AF_INET|IPv4 Internet protocols|
|AF_INET6|IPv6 Internet protocols|

`type`:指定socket的通信语义。一般传入以下值：
|Name|Description|
|:-|-:|
|SOCK_STREAM|提供序列、可靠、双工、基与连接的字节流。如TCP|
|SOCK_DGRAM|数据报，无连接，一个固定最大长度的不可靠消息|

`protocol`:指定socket使用特定的协议。正常情况下，在给定的协议族中，只有一个协议支持特定的套接字类型，在这种情况下protocol值设为0。

### SOCK_STREAM套接口（流套接口）的性质  
1. 不保留任何消息的边界  
举一个例子：本地主机通过两次独立的`write()`调用向远程主机发送数据，第一次本地进程写入25字节的数据，并通过套接口发送到远程进程，第二次再写入30字节的数据发往远程进程，总共55字节的数据，而远程进程从套接口接收数据时，将消息作为一个完整的单元来接收，或是通过若干次独立的读操作来将数据取走，即接受端并不知道这55字节的数据是分25字节和30字节两次来发送的。  
2. 有序性  
可以保证接受的数据字节与发送是顺序完全一致（意味着通信之前必须建立一个连接）
3. 无错性  
可以保证接受的数据在接收端被无错的接受。如果有错误发生，在尝试完所有的错误恢复措施后仍无法消除错误，流套接口就会报告错误。所进行的错误恢复措施尝试是完全自动的，不需编程者的指导。

### SOCK_STRAM常用的通信函数
流套接字在发送或者接受数据的时候处于`connectd`状态。  
连接对方端的时候可以调用`connect()`系统调用。  
连接之后，数据就可以通过`read()`或`write()`系统调用来传输数据。函数的另一种变体也可以调用`send()`或`recv()`系统调用来传输数据。 
当一个会话已经完成时，可以执行`close()`关闭连接。  
Out-of-band data（[带外数据、加速数据](https://blog.csdn.net/yejing_utopia/article/details/45154159 "解释")）也可以使用`send()`和`recv()`来发送接受紧急数据。 



